# Medusa

[![GoDoc](https://godoc.org/github.com/jonasvinther/medusa?status.svg)](https://godoc.org/github.com/jonasvinther/medusa)
[![Go Report Card](https://goreportcard.com/badge/github.com/jonasvinther/medusa)](https://goreportcard.com/report/github.com/jonasvinther/medusa)
[![Build status](https://github.com/jonasvinther/medusa/workflows/Go/badge.svg)](https://github.com/jonasvinther/medusa/actions)
[![codecov](https://codecov.io/gh/jonasvinther/medusa/branch/main/graph/badge.svg)](https://codecov.io/gh/jonasvinther/medusa)

## About
Medusa is a cli tool currently for importing a json or yaml file into HashiCorp Vault.

## How to use
Go learn how to use the various commands, check out [quick-guide](docs/quick-guide.md)

### Secure secret management outside Vault
Medusa is able to securely manage your secrets while being transported between Vault instances.  
Medusa uses a hybrid encryption solution in order to keep your secrets safe.  

### Exporting and encrypting Vault secrets
When exporting the secrets are encrypted using the AES symmetric encryption algorithm.  
The AES encryption key is randomly generated by Medusa every time the export command is being called.  
Then the AES key is encrypted by the provided RSA public key and then stored together with the encrypted secrets.  
This make sure that the exported secrets can be transfered safely between Vault instances.  
The exported secrets can only be decrypted by a person who is in possession of the RSA private key.

``` bash
$ ./medusa export secret/A -a="https://0.0.0.0:8201" -t="00000000-0000-0000-0000-000000000000" --insecure --encrypt true --public-key="./public-key.pem"
```

### Importing and decrypting Vault secrets


``` bash
$ ./medusa import kv encrypted-file.txt -a="https://0.0.0.0:8201" -t="00000000-0000-0000-0000-000000000000" --insecure --decrypt true --private-key private-key.pem
```

## Medusa help
To test out `medusa` on your laptop
```
Medusa is a cli tool currently for importing a json or yaml file into HashiCorp Vault.
Created by by Jonas Vinther & Henrik HÃ¸egh.

Usage:
  medusa [command]

Available Commands:
  export      Export Vault secrets as yaml
  help        Help about any command
  import      Import a yaml file into a Vault instance

Flags:
  -a, --address string   Address of the Vault server
  -h, --help             help for medusa
  -k, --insecure         Allow insecure server connections when using SSL
  -t, --token string     Vault authentication token

Use "medusa [command] --help" for more information about a command.
``` 

## How to contribute
Please read and follow our [contributing guide](docs/CONTRIBUTING.md)
